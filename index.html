<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>星语占星</title>
    <link rel="manifest" href="manifest.json">
    <style>
        :root { --bg: #0b0e21; --card: #1a1c3a; --accent: #a29bfe; }
        body { margin: 0; background: var(--bg); color: white; font-family: sans-serif; display: flex; flex-direction: column; align-items: center; min-height: 100vh; }
        .grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; width: 90%; margin-top: 20px; }
        .item { background: var(--card); padding: 20px 5px; border-radius: 12px; text-align: center; border: 1px solid rgba(255,255,255,0.1); }
        #modal { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: #2d3436; padding: 25px; border-radius: 20px; width: 70%; z-index: 9999; border: 2px solid var(--accent); text-align: center; }
        #overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 9998; }
    </style>
</head>
<body>
    <h1 style="margin-top:40px;">✨ 每日星运</h1>
    <div id="grid" class="grid"></div>
    <div id="overlay" onclick="closeM()"></div>
    <div id="modal"><h2 id="m-t"></h2><p id="m-p">加载中...</p><button onclick="closeM()" style="margin-top:15px; padding:10px 20px; border-radius:20px; border:none; background:var(--accent);">关闭</button></div>

    <script>
        // 1. 立即渲染内容
        var signs = ['白羊','金牛','双子','巨蟹','狮子','处女','天秤','天蝎','射手','摩羯','水瓶','双鱼'];
        var icons = ['♈','♉','♊','♋','♌','♍','♎','♏','♐','♑','♒','♓'];
        var g = document.getElementById('grid');
        
        for (var i = 0; i < signs.length; i++) {
            (function(index){
                var d = document.createElement('div');
                d.className = 'item';
                d.innerHTML = '<div style="font-size:2rem">' + icons[index] + '</div>' + signs[index];
                d.onclick = function() {
                    document.getElementById('m-t').innerText = signs[index] + '座';
                    document.getElementById('m-p').innerText = "今日运势大吉，适合开启新计划！";
                    document.getElementById('modal').style.display = 'block';
                    document.getElementById('overlay').style.display = 'block';
                };
                g.appendChild(d);
            })(i);
        }

        function closeM() {
            document.getElementById('modal').style.display = 'none';
            document.getElementById('overlay').style.display = 'none';
        }

        // 2. 最后再注册 SW
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('./sw.js').then(() => console.log("PWA Ready"));
        }
    </script>
</body>
</html>